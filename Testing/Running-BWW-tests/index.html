<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Pre-requisites - Internal Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Pre-requisites";
        var mkdocs_page_input_path = "Testing\\Running-BWW-tests.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Internal Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Internal Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Pre-requisites</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="pre-requisites">Pre-requisites</h1>
<p>Make sure to follow <code>Getting started</code> from <code>README.md</code> to install all dependencies before running tests.</p>
<h1 id="tldr">TL;DR</h1>
<ul>
<li><code>npm test</code> in <code>src</code> and <code>vue-elements</code> folders;</li>
<li><code>npm run *:watch</code> during active development;</li>
<li>There is VS Code plugin</li>
</ul>
<h1 id="active-development">Active development</h1>
<h2 id="setup">Setup</h2>
<p>Make sure to install all recommended extensions from <code>extensions.recommendations</code> of <code>BorderWiseWeb/Frontend/BorderWiseWeb-Frontend.code-workspace</code>; VS Code should've asked if you'd like to install them when you first opened the workspace.</p>
<h2 id="working-on-legacy-angularjs-frontendsrc-project">Working on legacy AngularJS <code>Frontend/src</code> project</h2>
<h3 id="running-karma-unit-tests">Running Karma unit tests</h3>
<ul>
<li><code>npm run test-karma:watch</code></li>
<li><code>npm run test-browser</code> - runs in browser and allows to use Chrome DevTools to debug</li>
<li><code>fit()</code>/<code>fdescribe()</code> to run <strong>f</strong>ocused (specific) tests and skip others</li>
</ul>
<h3 id="running-cypress-integratione2e-tests">Running Cypress integration/e2e tests</h3>
<h4 id="cli">CLI</h4>
<ul>
<li><code>npm run test-e2e -- --spec="cypress/e2e/auth/login.spec.js"</code> - run 1 spec file at a time </li>
<li><code>npm run test-e2e</code> - run all specs files (not recommended because there are too many specs files, and it would take very long)</li>
</ul>
<h4 id="cypress-ui-app">Cypress UI App</h4>
<ol>
<li><code>npm run test-e2e:open</code> - start Cypress server and open UI App
<img alt="the-launchpad.png" src="/.attachments/the-launchpad-4ae59f0b-cf22-45da-9a83-a52cce2886b3.png" /></li>
<li>Choose testing type: "E2E Testing", and select a browser:
<img alt="select-browser.png" src="/.attachments/select-browser-890dc0c8-1911-4e5e-ae0c-f24254528f7b.png" /></li>
<li>Select a spec file and start running tests:
<img alt="spec-list-with-new-spec.png" src="/.attachments/spec-list-with-new-spec-2ad67673-bccd-4d94-a6c1-fcb5ed9833fd.png" /></li>
</ol>
<h2 id="working-on-new-vue-frontendvue-elements-project">Working on new Vue <code>Frontend/vue-elements</code> project</h2>
<p>You can choose to run unit tests in a few different ways, see below.</p>
<h3 id="cli_1">CLI</h3>
<p>This is the easiest way, also this is how tests run in CI so you can debug CI issues using CLI on your local.
- <code>npm run test:unit:watch</code>
- <code>it.only()</code>/<code>describe.only()</code> - to run only specific tests</p>
<h3 id="vitest-ui">Vitest UI</h3>
<p>This is the nicest and most productive way, also quite reliable. You can open vitest UI on the second screen and get a nice view of live test results with easy navigation.
- <code>npm run test:unit:ui</code>
- <code>npx vitest --ui PageContentSetup</code> or similar to only run specific test file
- see <a href="https://vitest.dev/guide/ui.html">docs</a> for more info
<IMG  src="https://user-images.githubusercontent.com/11247099/171992267-5cae2fa0-b927-400a-8eb1-da776974cb61.png"  alt="Vitest UI"/></p>
<h3 id="vs-code-test-explorer">VS Code test explorer</h3>
<p>Not recommended, known for many issues, may work for some tests, see <a href="https://marketplace.visualstudio.com/items?itemName=ZixuanChen.vitest-explorer">docs</a></p>
<h1 id="running-all-tests">Running all tests</h1>
<h2 id="when">When?</h2>
<ul>
<li>You might want to run all tests before submitting to SH0 to DAT, this might save you time because you won't have to wait in the queue to run tests, also running them locally is usually faster, especially if you're using WSL.</li>
<li>Another reason to run all tests locally is when you need to debug some error that happened during DAT/QGL run. Still, I would recommend running specific tests, if prettier failed - only run prettier fix; if unit tests failed - only run unit tests; it'll speed things up and help you in the long run.</li>
</ul>
<h2 id="how">How?</h2>
<h3 id="legacy-angularjs-frontendsrc-project">Legacy AngularJS <code>Frontend/src</code> project</h3>
<ul>
<li><code>npm test</code></li>
<li>Check out <code>package.json</code> to see what this script will run, you can manually run parts to speed it up</li>
<li>Beware that cypress (<code>test-e2e</code>) tests will likely randomly fail due to a known http-server bug. You can use <code>npm run test-e2e:open</code> to open Cypress UI and run specific tests you're working on individually. Or use QGL to run all tests - will be extremely slow tho. Might want to give <code>cypress-run-all.js</code> a try, not sure it'll help tho (need to modify it to restart http-server every time before each test).</li>
</ul>
<h3 id="new-vue-frontendvue-elements-project">New Vue <code>Frontend/vue-elements</code> project</h3>
<ul>
<li><code>npm test</code></li>
</ul>
<h1 id="docker">Docker</h1>
<p>We have integration tests for Docker and Nginx - <code>src/__tests__/docker.skip.ts</code>;</p>
<h2 id="when_1">When?</h2>
<p>These are only to be run on local dev machine when making config changes. These will be run on DAT as well once we have Docker support on DAT.</p>
<h2 id="how_1">How?</h2>
<ol>
<li>Rename this file from <code>docker.skip.ts</code> to <code>docker.spec.ts</code> in order to run it</li>
<li><code>cd ../src &amp;&amp; npm run build-dev</code> - make sure to run build-dev from gulp before running these tests</li>
<li><code>npx -y cross-env DEBUG=true npm run test:unit -- docker</code> - one-time run with debug output (recommended when running for the first time)</li>
<li>During active development - <code>vitest docker</code></li>
</ol>
<p>Note, that when this test fails it may leave changes in <code>nginx.conf</code> - do not commit them and revert in order for test to run properly next time.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
